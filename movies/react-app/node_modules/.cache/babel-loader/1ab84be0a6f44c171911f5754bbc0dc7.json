{"ast":null,"code":"import _classCallCheck from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import'./MovieList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var xhr;var MovieList=/*#__PURE__*/function(_Component){_inherits(MovieList,_Component);var _super=_createSuper(MovieList);function MovieList(props){var _this;_classCallCheck(this,MovieList);_this=_super.call(this,props);_this.toMovie=_this.toMovie.bind(_assertThisInitialized(_this));_this.genreLabel=_this.genreLabel.bind(_assertThisInitialized(_this));_this.state={movies:[]};_this.sendRequest=_this.sendRequest.bind(_assertThisInitialized(_this));_this.processRequest=_this.processRequest.bind(_assertThisInitialized(_this));_this.props.eventDispatcher.subscribe(\"addMovie\",_this.sendRequest);return _this;}_createClass(MovieList,[{key:\"sendRequest\",value:function sendRequest(){xhr=new XMLHttpRequest();xhr.open(\"GET\",\"http://localhost/movies\");xhr.send();xhr.addEventListener(\"readystatechange\",this.processRequest,false);}},{key:\"processRequest\",value:function processRequest(){if(xhr.readyState===4&&xhr.status===200){var response=JSON.parse(xhr.responseText);this.setState({movies:response});}}},{key:\"componentDidMount\",value:function componentDidMount(){this.sendRequest();}},{key:\"genreLabel\",value:function genreLabel(g){return\"?\";}},{key:\"toMovie\",value:function toMovie(m){var g=\"?\";for(var i=0;i<this.props.genres.length;i++){if(this.props.genres[i].value===m.genre){g=this.props.genres[i].label;break;}}return/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:m.title}),/*#__PURE__*/_jsx(\"td\",{children:g})]})},m.guid);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"table\",{className:\"movie-list\",children:[/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Genre\"})]})}),this.state.movies.map(this.toMovie)]});}}]);return MovieList;}(Component);export default MovieList;","map":{"version":3,"names":["React","Component","xhr","MovieList","props","toMovie","bind","genreLabel","state","movies","sendRequest","processRequest","eventDispatcher","subscribe","XMLHttpRequest","open","send","addEventListener","readyState","status","response","JSON","parse","responseText","setState","g","m","i","genres","length","value","genre","label","title","guid","map"],"sources":["/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/src/MovieList.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport './MovieList.css';\n\nvar xhr;\n\nclass MovieList extends Component {\n\n    constructor(props) {\n        super(props);\n        this.toMovie = this.toMovie.bind(this);\n        this.genreLabel = this.genreLabel.bind(this);\n        this.state = {\n            movies: []\n        }\n        this.sendRequest = this.sendRequest.bind(this);\n        this.processRequest = this.processRequest.bind(this);\n        this.props.eventDispatcher.subscribe(\"addMovie\", this.sendRequest);\n    }\n\n    sendRequest() {\n        xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", \"http://localhost/movies\");\n        xhr.send();\n        xhr.addEventListener(\"readystatechange\", this.processRequest, false);\n    }\n\n    processRequest() {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n            var response = JSON.parse(xhr.responseText);\n            this.setState({\n                movies: response\n            });\n        }\n    }\n\n    componentDidMount() {\n        this.sendRequest();\n    }\n\n    genreLabel(g) {\n        return \"?\";\n    }\n\n    toMovie(m) {\n        var g = \"?\";\n        for (var i = 0; i < this.props.genres.length; i++) {\n            if (this.props.genres[i].value === m.genre) {\n                g = this.props.genres[i].label;\n                break;\n            }\n        }\n        return (<tbody key={m.guid}><tr><td>{m.title}</td><td>{g}</td></tr></tbody>);\n    }\n\n    render() {\n        return (\n            <table className=\"movie-list\" >\n                <tbody>\n                    <tr>\n                        <th>Name</th>\n                        <th>Genre</th>\n                    </tr>\n                </tbody>\n                {this.state.movies.map(this.toMovie)}\n            </table>\n        )\n    }\n}\n\nexport default MovieList;"],"mappings":"ixBAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,iBAAP,C,wFAEA,GAAIC,IAAJ,C,GAEMC,U,sGAEF,mBAAYC,KAAZ,CAAmB,2CACf,uBAAMA,KAAN,EACA,MAAKC,OAAL,CAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CACA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBD,IAAhB,+BAAlB,CACA,MAAKE,KAAL,CAAa,CACTC,MAAM,CAAE,EADC,CAAb,CAGA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBJ,IAAjB,+BAAnB,CACA,MAAKK,cAAL,CAAsB,MAAKA,cAAL,CAAoBL,IAApB,+BAAtB,CACA,MAAKF,KAAL,CAAWQ,eAAX,CAA2BC,SAA3B,CAAqC,UAArC,CAAiD,MAAKH,WAAtD,EATe,aAUlB,C,iDAED,sBAAc,CACVR,GAAG,CAAG,GAAIY,eAAJ,EAAN,CACAZ,GAAG,CAACa,IAAJ,CAAS,KAAT,CAAgB,yBAAhB,EACAb,GAAG,CAACc,IAAJ,GACAd,GAAG,CAACe,gBAAJ,CAAqB,kBAArB,CAAyC,KAAKN,cAA9C,CAA8D,KAA9D,EACH,C,8BAED,yBAAiB,CACb,GAAIT,GAAG,CAACgB,UAAJ,GAAmB,CAAnB,EAAwBhB,GAAG,CAACiB,MAAJ,GAAe,GAA3C,CAAgD,CAC5C,GAAIC,SAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWpB,GAAG,CAACqB,YAAf,CAAf,CACA,KAAKC,QAAL,CAAc,CACVf,MAAM,CAAEW,QADE,CAAd,EAGH,CACJ,C,iCAED,4BAAoB,CAChB,KAAKV,WAAL,GACH,C,0BAED,oBAAWe,CAAX,CAAc,CACV,MAAO,GAAP,CACH,C,uBAED,iBAAQC,CAAR,CAAW,CACP,GAAID,EAAC,CAAG,GAAR,CACA,IAAK,GAAIE,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKvB,KAAL,CAAWwB,MAAX,CAAkBC,MAAtC,CAA8CF,CAAC,EAA/C,CAAmD,CAC/C,GAAI,KAAKvB,KAAL,CAAWwB,MAAX,CAAkBD,CAAlB,EAAqBG,KAArB,GAA+BJ,CAAC,CAACK,KAArC,CAA4C,CACxCN,CAAC,CAAG,KAAKrB,KAAL,CAAWwB,MAAX,CAAkBD,CAAlB,EAAqBK,KAAzB,CACA,MACH,CACJ,CACD,mBAAQ,oCAAoB,mCAAI,oBAAKN,CAAC,CAACO,KAAP,EAAJ,cAAsB,oBAAKR,CAAL,EAAtB,GAApB,EAAYC,CAAC,CAACQ,IAAd,CAAR,CACH,C,sBAED,iBAAS,CACL,mBACI,eAAO,SAAS,CAAC,YAAjB,wBACI,oCACI,mCACI,4BADJ,cAEI,6BAFJ,GADJ,EADJ,CAOK,KAAK1B,KAAL,CAAWC,MAAX,CAAkB0B,GAAlB,CAAsB,KAAK9B,OAA3B,CAPL,GADJ,CAWH,C,uBA7DmBJ,S,EAgExB,cAAeE,UAAf"},"metadata":{},"sourceType":"module"}