{"ast":null,"code":"import _classCallCheck from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import'./MovieForm.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var xhr;var MovieForm=/*#__PURE__*/function(_Component){_inherits(MovieForm,_Component);var _super=_createSuper(MovieForm);// Overrides Component constructor \nfunction MovieForm(props){var _this;_classCallCheck(this,MovieForm);_this=_super.call(this,props);// Bind methods to current instance\n_this.handleChangeTitle=_this.handleChangeTitle.bind(_assertThisInitialized(_this));_this.handleChangeGenre=_this.handleChangeGenre.bind(_assertThisInitialized(_this));_this.changeState=_this.changeState.bind(_assertThisInitialized(_this));_this.toGenreOption=_this.toGenreOption.bind(_assertThisInitialized(_this));_this.tryCreateMovie=_this.tryCreateMovie.bind(_assertThisInitialized(_this));_this.processRequest=_this.processRequest.bind(_assertThisInitialized(_this));_this.state={title:'',genre:'comedy'};return _this;}_createClass(MovieForm,[{key:\"tryCreateMovie\",value:function tryCreateMovie(){xhr=new XMLHttpRequest();xhr.open(\"POST\",\"http://localhost/movies\");xhr.send(JSON.stringify({\"title\":this.state.title,\"genre\":this.state.genre}));xhr.addEventListener(\"readystatechange\",this.processRequest,false);}},{key:\"processRequest\",value:function processRequest(){if(xhr.readyState===4&&xhr.status===200){this.props.eventDispatcher.dispatch(\"addMovie\",\"\");this.changeState({title:\"\"});}}},{key:\"handleChangeTitle\",value:function handleChangeTitle(event){this.changeState({title:event.target.value});}},{key:\"handleChangeGenre\",value:function handleChangeGenre(event){this.changeState({genre:event.target.value});}},{key:\"changeState\",value:function changeState(keyVal){this.setState(Object.assign({},this.state,keyVal));}},{key:\"toGenreOption\",value:function toGenreOption(g){return/*#__PURE__*/_jsx(\"option\",{value:g.value,children:g.label},g.value);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"movie-form\",onSubmit:this.tryCreateMovie,children:[/*#__PURE__*/_jsx(\"span\",{className:\"movie-form-element\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Title\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:this.state.title,onChange:this.handleChangeTitle})]})}),/*#__PURE__*/_jsx(\"span\",{className:\"movie-form-element\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Genre\\xA0\",/*#__PURE__*/_jsx(\"select\",{type:\"text\",value:this.state.genre,onChange:this.handleChangeGenre,children:this.props.genres.map(this.toGenreOption)})]})}),/*#__PURE__*/_jsx(\"span\",{className:\"movie-form-element\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})})]})});}}]);return MovieForm;}(Component);export default MovieForm;","map":{"version":3,"names":["React","Component","xhr","MovieForm","props","handleChangeTitle","bind","handleChangeGenre","changeState","toGenreOption","tryCreateMovie","processRequest","state","title","genre","XMLHttpRequest","open","send","JSON","stringify","addEventListener","readyState","status","eventDispatcher","dispatch","event","target","value","keyVal","setState","Object","assign","g","label","genres","map"],"sources":["/Users/rohan/Desktop/Rohan's Stuff/VSCode/MovieTracker/movies/react-app/src/MovieForm.js"],"sourcesContent":["import React, { Component } from 'react';\nimport './MovieForm.css';\n\nvar xhr;\n\nclass MovieForm extends Component {\n\n    // Overrides Component constructor \n    constructor(props) {\n        super(props);\n\n        // Bind methods to current instance\n        this.handleChangeTitle = this.handleChangeTitle.bind(this);\n        this.handleChangeGenre = this.handleChangeGenre.bind(this);\n        this.changeState = this.changeState.bind(this);\n        this.toGenreOption = this.toGenreOption.bind(this);\n        this.tryCreateMovie = this.tryCreateMovie.bind(this);\n        this.processRequest = this.processRequest.bind(this);\n\n        this.state = { title: '', genre: 'comedy' };\n    }\n    \n    tryCreateMovie() {\n        xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", \"http://localhost/movies\");\n        xhr.send(JSON.stringify({ \"title\": this.state.title, \"genre\": this.state.genre }));\n        xhr.addEventListener(\"readystatechange\", this.processRequest, false);\n    }\n\n    processRequest() {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n            this.props.eventDispatcher.dispatch(\"addMovie\", \"\");\n            this.changeState( { title: \"\"} );\n        }\n    }\n\n    handleChangeTitle(event) {\n        this.changeState( { title: event.target.value } );\n    }\n\n    handleChangeGenre(event) {\n        this.changeState( { genre: event.target.value } );\n    }\n\n    changeState(keyVal) {\n        this.setState( Object.assign({}, this.state, keyVal) );\n    }\n\n    toGenreOption(g) {\n        return (<option key={g.value} value={g.value}>{g.label}</option>);\n    }\n\n    render() {\n        return (\n            <>\n                <form className=\"movie-form\" onSubmit={this.tryCreateMovie}>\n                    <span className=\"movie-form-element\">\n                        <label>Title&nbsp;\n                            <input type=\"text\" value={this.state.title} onChange={this.handleChangeTitle} />\n                        </label>\n                    </span>\n                    <span className=\"movie-form-element\">\n                        <label>Genre&nbsp;\n                            <select type=\"text\" value={this.state.genre} onChange={this.handleChangeGenre}>\n                                {this.props.genres.map(this.toGenreOption)}\n                            </select>\n                        </label>\n                    </span>\n                    <span className=\"movie-form-element\">\n                        <input type=\"submit\" value=\"Submit\" />\n                    </span>\n                </form>\n            </>\n        )\n    }\n\n}\n\nexport default MovieForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}